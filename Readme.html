<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.8.1: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7056 2011-06-17 10:50:48Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document">


<div class="section" id="introduction">
<h1><a class="toc-backref" href="#id17">Introduction</a></h1>
<p>DFHack is a Dwarf Fortress memory access library and a set of basic
tools that use it. Tools come in the form of plugins or (not yet)
external tools. It is an attempt to unite the various ways tools
access DF memory and allow for easier development of new tools.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id17">Introduction</a></li>
<li><a class="reference internal" href="#getting-dfhack" id="id18">Getting DFHack</a></li>
<li><a class="reference internal" href="#compatibility" id="id19">Compatibility</a></li>
<li><a class="reference internal" href="#installation-removal" id="id20">Installation/Removal</a></li>
<li><a class="reference internal" href="#using-dfhack" id="id21">Using DFHack</a></li>
<li><a class="reference internal" href="#something-doesn-t-work-help" id="id22">Something doesn't work, help!</a></li>
<li><a class="reference internal" href="#the-init-file" id="id23">The init file</a></li>
<li><a class="reference internal" href="#commands" id="id24">Commands</a><ul>
<li><a class="reference internal" href="#adv-bodyswap" id="id25">adv-bodyswap</a><ul>
<li><a class="reference internal" href="#usage" id="id26">Usage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advtools" id="id27">advtools</a><ul>
<li><a class="reference internal" href="#id1" id="id28">Usage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changevein" id="id29">changevein</a></li>
<li><a class="reference internal" href="#follow" id="id30">follow</a></li>
<li><a class="reference internal" href="#forcepause" id="id31">forcepause</a></li>
<li><a class="reference internal" href="#nopause" id="id32">nopause</a></li>
<li><a class="reference internal" href="#die" id="id33">die</a></li>
<li><a class="reference internal" href="#autodump" id="id34">autodump</a><ul>
<li><a class="reference internal" href="#options" id="id35">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#autodump-destroy-here" id="id36">autodump-destroy-here</a></li>
<li><a class="reference internal" href="#autodump-destroy-item" id="id37">autodump-destroy-item</a></li>
<li><a class="reference internal" href="#clean" id="id38">clean</a><ul>
<li><a class="reference internal" href="#id2" id="id39">Options</a></li>
<li><a class="reference internal" href="#extra-options-for-map" id="id40">Extra options for 'map'</a></li>
</ul>
</li>
<li><a class="reference internal" href="#spotclean" id="id41">spotclean</a></li>
<li><a class="reference internal" href="#cleanowned" id="id42">cleanowned</a><ul>
<li><a class="reference internal" href="#id3" id="id43">Options</a></li>
<li><a class="reference internal" href="#example" id="id44">Example:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#colonies" id="id45">colonies</a><ul>
<li><a class="reference internal" href="#id4" id="id46">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deramp-by-zilpin" id="id47">deramp (by zilpin)</a></li>
<li><a class="reference internal" href="#df2minecraft" id="id48">df2minecraft</a></li>
<li><a class="reference internal" href="#dfusion" id="id49">dfusion</a><ul>
<li><a class="reference internal" href="#confirmed-working-dfusion-plugins" id="id50">Confirmed working DFusion plugins:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#drybuckets" id="id51">drybuckets</a></li>
<li><a class="reference internal" href="#fastdwarf" id="id52">fastdwarf</a></li>
<li><a class="reference internal" href="#filltraffic" id="id53">filltraffic</a><ul>
<li><a class="reference internal" href="#traffic-type-codes" id="id54">Traffic Type Codes:</a></li>
<li><a class="reference internal" href="#other-options" id="id55">Other Options:</a></li>
<li><a class="reference internal" href="#id5" id="id56">Example:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alltraffic" id="id57">alltraffic</a><ul>
<li><a class="reference internal" href="#id6" id="id58">Traffic Type Codes:</a></li>
<li><a class="reference internal" href="#id7" id="id59">Example:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fixdiplomats" id="id60">fixdiplomats</a></li>
<li><a class="reference internal" href="#fixmerchants" id="id61">fixmerchants</a></li>
<li><a class="reference internal" href="#fixveins" id="id62">fixveins</a></li>
<li><a class="reference internal" href="#fixwagons" id="id63">fixwagons</a></li>
<li><a class="reference internal" href="#flows" id="id64">flows</a></li>
<li><a class="reference internal" href="#getplants" id="id65">getplants</a><ul>
<li><a class="reference internal" href="#id8" id="id66">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tidlers" id="id67">tidlers</a></li>
<li><a class="reference internal" href="#twaterlvl" id="id68">twaterlvl</a></li>
<li><a class="reference internal" href="#job" id="id69">job</a></li>
<li><a class="reference internal" href="#job-material" id="id70">job-material</a></li>
<li><a class="reference internal" href="#job-duplicate" id="id71">job-duplicate</a></li>
<li><a class="reference internal" href="#keybinding" id="id72">keybinding</a><ul>
<li><a class="reference internal" href="#id9" id="id73">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#liquids" id="id74">liquids</a></li>
<li><a class="reference internal" href="#mode" id="id75">mode</a></li>
<li><a class="reference internal" href="#extirpate" id="id76">extirpate</a><ul>
<li><a class="reference internal" href="#id10" id="id77">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#grow" id="id78">grow</a></li>
<li><a class="reference internal" href="#immolate" id="id79">immolate</a></li>
<li><a class="reference internal" href="#probe" id="id80">probe</a></li>
<li><a class="reference internal" href="#prospect" id="id81">prospect</a><ul>
<li><a class="reference internal" href="#id11" id="id82">Options</a></li>
<li><a class="reference internal" href="#pre-embark-estimate" id="id83">Pre-embark estimate</a></li>
<li><a class="reference internal" href="#id12" id="id84">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#regrass" id="id85">regrass</a></li>
<li><a class="reference internal" href="#rename" id="id86">rename</a><ul>
<li><a class="reference internal" href="#id13" id="id87">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reveal" id="id88">reveal</a></li>
<li><a class="reference internal" href="#unreveal" id="id89">unreveal</a></li>
<li><a class="reference internal" href="#revtoggle" id="id90">revtoggle</a></li>
<li><a class="reference internal" href="#revflood" id="id91">revflood</a></li>
<li><a class="reference internal" href="#seedwatch" id="id92">seedwatch</a></li>
<li><a class="reference internal" href="#showmood" id="id93">showmood</a></li>
<li><a class="reference internal" href="#copystock" id="id94">copystock</a></li>
<li><a class="reference internal" href="#ssense-stonesense" id="id95">ssense / stonesense</a></li>
<li><a class="reference internal" href="#tiletypes" id="id96">tiletypes</a></li>
<li><a class="reference internal" href="#tubefill" id="id97">tubefill</a></li>
<li><a class="reference internal" href="#vdig" id="id98">vdig</a></li>
<li><a class="reference internal" href="#vdigx" id="id99">vdigx</a></li>
<li><a class="reference internal" href="#expdig" id="id100">expdig</a><ul>
<li><a class="reference internal" href="#patterns" id="id101">Patterns:</a></li>
<li><a class="reference internal" href="#filters" id="id102">Filters:</a></li>
<li><a class="reference internal" href="#examples" id="id103">Examples:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#digcircle" id="id104">digcircle</a><ul>
<li><a class="reference internal" href="#shape" id="id105">Shape:</a></li>
<li><a class="reference internal" href="#action" id="id106">Action:</a></li>
<li><a class="reference internal" href="#designation-types" id="id107">Designation types:</a></li>
<li><a class="reference internal" href="#id14" id="id108">Examples:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#weather" id="id109">weather</a><ul>
<li><a class="reference internal" href="#id15" id="id110">Options:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#workflow" id="id111">workflow</a><ul>
<li><a class="reference internal" href="#id16" id="id112">Usage</a></li>
<li><a class="reference internal" href="#function" id="id113">Function</a></li>
<li><a class="reference internal" href="#constraint-examples" id="id114">Constraint examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapexport" id="id115">mapexport</a></li>
<li><a class="reference internal" href="#dwarfexport" id="id116">dwarfexport</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="getting-dfhack">
<h1><a class="toc-backref" href="#id18">Getting DFHack</a></h1>
<p>The project is currently hosted on <a class="reference external" href="http://www.github.com/">github</a>, for both source and
binaries at  <a class="reference external" href="http://github.com/peterix/dfhack">http://github.com/peterix/dfhack</a></p>
<p>Releases can be downloaded from here: <a class="reference external" href="https://github.com/peterix/dfhack/downloads">https://github.com/peterix/dfhack/downloads</a></p>
<p>All new releases are announced in the bay12 thread: <a class="reference external" href="http://tinyurl.com/dfhack-ng">http://tinyurl.com/dfhack-ng</a></p>
</div>
<div class="section" id="compatibility">
<h1><a class="toc-backref" href="#id19">Compatibility</a></h1>
<p>DFHack works on Windows XP, Vista, 7 or any modern Linux distribution.
OSX is not supported due to lack of developers with a Mac.</p>
<p>Currently, only version 0.31.25 is supported. If you need DFHack
for older versions, look for older releases.</p>
<p>On Windows, you have to use the SDL version of DF.</p>
<p>It is possible to use the Windows DFHack under wine/OSX.</p>
</div>
<div class="section" id="installation-removal">
<h1><a class="toc-backref" href="#id20">Installation/Removal</a></h1>
<p>Installing DFhack involves copying files into your DF folder.
Copy the files from a release archive so that:</p>
<blockquote>
<ul class="simple">
<li>On Windows, SDL.dll is replaced</li>
<li>On Linux, the 'dfhack' script is placed in the same folder as the 'df' script</li>
</ul>
</blockquote>
<p>Uninstalling is basically the same, in reverse:</p>
<blockquote>
<ul class="simple">
<li>On Windows, first delete SDL.dll and rename SDLreal.dll to SDL.dll. Then remove the other DFHack files</li>
<li>On Linux, Remove the DFHack files.</li>
</ul>
</blockquote>
<p>The stonesense plugin might require some additional libraries on Linux.</p>
<p>If any of the plugins or dfhack itself refuses to load, check the stderr.log file created in your DF folder.</p>
</div>
<div class="section" id="using-dfhack">
<h1><a class="toc-backref" href="#id21">Using DFHack</a></h1>
<p>DFHack basically extends what DF can do with something similar to the drop-down console found in Quake engine games. On Windows, this is a separate command line window. On linux, the terminal used to launch the dfhack script is taken over (so, make sure you start from a terminal).
Basic interaction with dfhack involves entering commands into the console. For some basic instroduction, use the 'help' command. To list all possible commands, use the 'ls' command.
Many commands have their own help or detailed description. You can use 'command help' or 'command ?' to show that.</p>
<p>The command line has some nice line editing capabilities, including history that's preserved between different runs of DF (use up/down keys to go through the history).</p>
<p>The second way to interact with DFHack is to bind the available commands to in-game hotkeys. The old way to do this is via the hotkey/zoom menu (normally opened with the 'h' key). Binding the commands is done by assigning a command as a hotkey name (with 'n').</p>
<p>A new and more flexible way is the keybinding command in the dfhack console. However, bindings created this way are not automatically remembered between runs of the game, so it becomes necessary to use the dfhack.init file to ensure that they are re-created every time it is loaded.</p>
<p>Interactive commands like 'liquids' cannot be used as hotkeys.</p>
<p>Most of the commands come from plugins. Those reside in 'hack/plugins/'.</p>
</div>
<div class="section" id="something-doesn-t-work-help">
<h1><a class="toc-backref" href="#id22">Something doesn't work, help!</a></h1>
<p>First, don't panic :) Second, dfhack keeps a few log files in DF's folder - stderr.log and stdout.log. You can look at those and possibly find out what's happening.
If you found a bug, you can either report it in the bay12 DFHack thread, the issues tracker on github, contact me (<a class="reference external" href="mailto:peterix&#64;gmail.com">peterix&#64;gmail.com</a>) or visit the #dfhack IRC channel on freenode.</p>
</div>
<div class="section" id="the-init-file">
<h1><a class="toc-backref" href="#id23">The init file</a></h1>
<p>If your DF folder contains a file named dfhack.init, its contents will be run every time you start DF. This allows setting up keybindings. An example file is provided as dfhack.init-example - you can tweak it and rename to dfhack.init if you want to use this functionality.</p>
</div>
<div class="section" id="commands">
<h1><a class="toc-backref" href="#id24">Commands</a></h1>
<p>Almost all the commands support using the 'help &lt;command-name&gt;' built-in command to retrieve further help without having to look at this document. Alternatively, some accept a 'help'/'?' option on their command line.</p>
<div class="section" id="adv-bodyswap">
<h2><a class="toc-backref" href="#id25">adv-bodyswap</a></h2>
<p>This allows taking control over your followers and other creatures in adventure mode. For example, you can make them pick up new arms and armor and equip them properly.</p>
<div class="section" id="usage">
<h3><a class="toc-backref" href="#id26">Usage</a></h3>
<blockquote>
<ul class="simple">
<li>When viewing unit details, body-swaps into that unit.</li>
<li>In the main adventure mode screen, reverts transient swap.</li>
</ul>
</blockquote>
</div>
</div>
<div class="section" id="advtools">
<h2><a class="toc-backref" href="#id27">advtools</a></h2>
<p>A package of different adventure mode tools (currently just one)</p>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id28">Usage</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name" colspan="2">list-equipped [all]:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">List armor and weapons equipped by your companions. If all is specified, also lists non-metal clothing.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="changevein">
<h2><a class="toc-backref" href="#id29">changevein</a></h2>
<p>Changes material of the vein under cursor to the specified inorganic RAW material.</p>
</div>
<div class="section" id="follow">
<h2><a class="toc-backref" href="#id30">follow</a></h2>
<p>Makes the game view follow the currently highlighted unit after you exit from current menu/cursor mode. Handy for watching dwarves running around. Deactivated by moving the view manually.</p>
</div>
<div class="section" id="forcepause">
<h2><a class="toc-backref" href="#id31">forcepause</a></h2>
<p>Forces DF to pause. This is useful when your FPS drops below 1 and you lose control of the game.</p>
<blockquote>
<ul class="simple">
<li>Activate with 'forcepause 1'</li>
<li>Deactivate with 'forcepause 0'</li>
</ul>
</blockquote>
</div>
<div class="section" id="nopause">
<h2><a class="toc-backref" href="#id32">nopause</a></h2>
<p>Disables pausing (both manual and automatic) with the exception of pause forced by 'reveal hell'.
This is nice for digging under rivers.</p>
</div>
<div class="section" id="die">
<h2><a class="toc-backref" href="#id33">die</a></h2>
<p>Instantly kills DF without saving.</p>
</div>
<div class="section" id="autodump">
<h2><a class="toc-backref" href="#id34">autodump</a></h2>
<p>This utility lets you quickly move all items designated to be dumped.
Items are instantly moved to the cursor position, the dump flag is unset,
and the forbid flag is set, as if it had been dumped normally.
Be aware that any active dump item tasks still point at the item.</p>
<p>Cursor must be placed on a floor tile so the items can be dumped there.</p>
<div class="section" id="options">
<h3><a class="toc-backref" href="#id35">Options</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">destroy:</th><td class="field-body">Destroy instead of dumping. Doesn't require a cursor.</td>
</tr>
<tr class="field"><th class="field-name">destroy-here:</th><td class="field-body">Destroy items only under the cursor.</td>
</tr>
<tr class="field"><th class="field-name">visible:</th><td class="field-body">Only process items that are not hidden.</td>
</tr>
<tr class="field"><th class="field-name">hidden:</th><td class="field-body">Only process hidden items.</td>
</tr>
<tr class="field"><th class="field-name">forbidden:</th><td class="field-body">Only process forbidden items (default: only unforbidden).</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="autodump-destroy-here">
<h2><a class="toc-backref" href="#id36">autodump-destroy-here</a></h2>
<p>Destroy items marked for dumping under cursor. Identical to autodump destroy-here, but intended for use as keybinding.</p>
</div>
<div class="section" id="autodump-destroy-item">
<h2><a class="toc-backref" href="#id37">autodump-destroy-item</a></h2>
<p>Destroy the selected item. The item may be selected in the 'k' list, or inside a container. If called again before the game is resumed, cancels destroy.</p>
</div>
<div class="section" id="clean">
<h2><a class="toc-backref" href="#id38">clean</a></h2>
<p>Cleans all the splatter that get scattered all over the map, items and creatures.
In an old fortress, this can significantly reduce FPS lag. It can also spoil your
!!FUN!!, so think before you use it.</p>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id39">Options</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">map:</th><td class="field-body">Clean the map tiles. By default, it leaves mud and snow alone.</td>
</tr>
<tr class="field"><th class="field-name">units:</th><td class="field-body">Clean the creatures. Will also clean hostiles.</td>
</tr>
<tr class="field"><th class="field-name">items:</th><td class="field-body">Clean all the items. Even a poisoned blade.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="extra-options-for-map">
<h3><a class="toc-backref" href="#id40">Extra options for 'map'</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">mud:</th><td class="field-body">Remove mud in addition to the normal stuff.</td>
</tr>
<tr class="field"><th class="field-name">snow:</th><td class="field-body">Also remove snow coverings.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="spotclean">
<h2><a class="toc-backref" href="#id41">spotclean</a></h2>
<p>Works like 'clean map snow mud', but only for the tile under the cursor. Ideal if you want to keep that bloody entrance 'clean map' would clean up.</p>
</div>
<div class="section" id="cleanowned">
<h2><a class="toc-backref" href="#id42">cleanowned</a></h2>
<p>Confiscates items owned by dwarfs.
By default, owned food on the floor and rotten items are confistacted and dumped.</p>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id43">Options</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">all:</th><td class="field-body">confiscate all owned items</td>
</tr>
<tr class="field"><th class="field-name">scattered:</th><td class="field-body">confiscated and dump all items scattered on the floor</td>
</tr>
<tr class="field"><th class="field-name">x:</th><td class="field-body">confiscate/dump items with wear level 'x' and more</td>
</tr>
<tr class="field"><th class="field-name">X:</th><td class="field-body">confiscate/dump items with wear level 'X' and more</td>
</tr>
<tr class="field"><th class="field-name">dryrun:</th><td class="field-body">a dry run. combine with other options to see what will happen without it actually happening.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example">
<h3><a class="toc-backref" href="#id44">Example:</a></h3>
<p><tt class="docutils literal">cleanowned scattered X</tt> : This will confiscate rotten and dropped food, garbage on the floors and any worn items with 'X' damage and above.</p>
</div>
</div>
<div class="section" id="colonies">
<h2><a class="toc-backref" href="#id45">colonies</a></h2>
<p>Allows listing all the vermin colonies on the map and optionally turning them into honey bee colonies.</p>
<div class="section" id="id4">
<h3><a class="toc-backref" href="#id46">Options</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">bees:</th><td class="field-body">turn colonies into honey bee colonies</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="deramp-by-zilpin">
<h2><a class="toc-backref" href="#id47">deramp (by zilpin)</a></h2>
<p>Removes all ramps designated for removal from the map. This is useful for replicating the old channel digging designation.
It also removes any and all 'down ramps' that can remain after a cave-in (you don't have to designate anything for that to happen).</p>
</div>
<div class="section" id="df2minecraft">
<h2><a class="toc-backref" href="#id48">df2minecraft</a></h2>
<p>This generates a minecraft world out of the currently loaded fortress.
Generated worlds are placed into your DF folder, named &quot;World #&quot;.</p>
<div class="warning">
<p class="first admonition-title">Warning</p>
<ul class="last simple">
<li>This is experimental! It <em>will</em> cause crashes.</li>
<li>If it works, the process takes quite a while to complete.</li>
<li>Do not use if you have any unsaved progress!</li>
<li>Non-square embarks are exported wrong. It's a known bug.</li>
</ul>
</div>
</div>
<div class="section" id="dfusion">
<h2><a class="toc-backref" href="#id49">dfusion</a></h2>
<p>This is the DFusion lua plugin system by warmist/darius, running as a DFHack plugin.</p>
<p>See the bay12 thread for details: <a class="reference external" href="http://www.bay12forums.com/smf/index.php?topic=69682.15">http://www.bay12forums.com/smf/index.php?topic=69682.15</a></p>
<div class="section" id="confirmed-working-dfusion-plugins">
<h3><a class="toc-backref" href="#id50">Confirmed working DFusion plugins:</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">simple_embark:</th><td class="field-body">allows changing the number of dwarves available on embark.</td>
</tr>
</tbody>
</table>
<div class="note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>Some of the DFusion plugins aren't completely ported yet. This can lead to crashes.</li>
<li>This is currently working only on Windows.</li>
<li>The game will be suspended while you're using dfusion. Don't panic when it doen't respond.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="drybuckets">
<h2><a class="toc-backref" href="#id51">drybuckets</a></h2>
<p>This utility removes water from all buckets in your fortress, allowing them to be safely used for making lye.</p>
</div>
<div class="section" id="fastdwarf">
<h2><a class="toc-backref" href="#id52">fastdwarf</a></h2>
<p>Makes your minions move at ludicrous speeds.</p>
<blockquote>
<ul class="simple">
<li>Activate with 'fastdwarf 1'</li>
<li>Deactivate with 'fastdwarf 0'</li>
</ul>
</blockquote>
</div>
<div class="section" id="filltraffic">
<h2><a class="toc-backref" href="#id53">filltraffic</a></h2>
<p>Set traffic designations using flood-fill starting at the cursor.</p>
<div class="section" id="traffic-type-codes">
<h3><a class="toc-backref" href="#id54">Traffic Type Codes:</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">H:</th><td class="field-body">High Traffic</td>
</tr>
<tr class="field"><th class="field-name">N:</th><td class="field-body">Normal Traffic</td>
</tr>
<tr class="field"><th class="field-name">L:</th><td class="field-body">Low Traffic</td>
</tr>
<tr class="field"><th class="field-name">R:</th><td class="field-body">Restricted Traffic</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="other-options">
<h3><a class="toc-backref" href="#id55">Other Options:</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">X:</th><td class="field-body">Fill accross z-levels.</td>
</tr>
<tr class="field"><th class="field-name">B:</th><td class="field-body">Include buildings and stockpiles.</td>
</tr>
<tr class="field"><th class="field-name">P:</th><td class="field-body">Include empty space.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id56">Example:</a></h3>
<p>'filltraffic H' - When used in a room with doors, it will set traffic to HIGH in just that room.</p>
</div>
</div>
<div class="section" id="alltraffic">
<h2><a class="toc-backref" href="#id57">alltraffic</a></h2>
<p>Set traffic designations for every single tile of the map (useful for resetting traffic designations).</p>
<div class="section" id="id6">
<h3><a class="toc-backref" href="#id58">Traffic Type Codes:</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">H:</th><td class="field-body">High Traffic</td>
</tr>
<tr class="field"><th class="field-name">N:</th><td class="field-body">Normal Traffic</td>
</tr>
<tr class="field"><th class="field-name">L:</th><td class="field-body">Low Traffic</td>
</tr>
<tr class="field"><th class="field-name">R:</th><td class="field-body">Restricted Traffic</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id7">
<h3><a class="toc-backref" href="#id59">Example:</a></h3>
<p>'alltraffic N' - Set traffic to 'normal' for all tiles.</p>
</div>
</div>
<div class="section" id="fixdiplomats">
<h2><a class="toc-backref" href="#id60">fixdiplomats</a></h2>
<p>Up to version 0.31.12, Elves only sent Diplomats to your fortress to propose tree cutting quotas due to a bug; once that bug was fixed, Elves stopped caring about excess tree cutting. This command adds a Diplomat position to all Elven civilizations, allowing them to negotiate tree cutting quotas (and allowing you to violate them and potentially start wars) in case you haven't already modified your raws accordingly.</p>
</div>
<div class="section" id="fixmerchants">
<h2><a class="toc-backref" href="#id61">fixmerchants</a></h2>
<p>This command adds the Guild Representative position to all Human civilizations, allowing them to make trade agreements (just as they did back in 0.28.181.40d and earlier) in case you haven't already modified your raws accordingly.</p>
</div>
<div class="section" id="fixveins">
<h2><a class="toc-backref" href="#id62">fixveins</a></h2>
<p>Removes invalid references to mineral inclusions and restores missing ones. Use this if you broke your embark with tools like tiletypes, or if you accidentally placed a construction on top of a valuable mineral floor.</p>
</div>
<div class="section" id="fixwagons">
<h2><a class="toc-backref" href="#id63">fixwagons</a></h2>
<p>Due to a bug in all releases of version 0.31, merchants no longer bring wagons with their caravans. This command re-enables them for all appropriate civilizations.</p>
</div>
<div class="section" id="flows">
<h2><a class="toc-backref" href="#id64">flows</a></h2>
<p>A tool for checking how many tiles contain flowing liquids. If you suspect that your magma sea leaks into HFS, you can use this tool to be sure without revealing the map.</p>
</div>
<div class="section" id="getplants">
<h2><a class="toc-backref" href="#id65">getplants</a></h2>
<p>This tool allows plant gathering and tree cutting by RAW ID. Specify the types of trees to cut down and/or shrubs to gather by their plant names, separated by spaces.</p>
<div class="section" id="id8">
<h3><a class="toc-backref" href="#id66">Options</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">-t:</th><td class="field-body">Select trees only (exclude shrubs)</td>
</tr>
<tr class="field"><th class="field-name">-s:</th><td class="field-body">Select shrubs only (exclude trees)</td>
</tr>
<tr class="field"><th class="field-name">-c:</th><td class="field-body">Clear designations instead of setting them</td>
</tr>
<tr class="field"><th class="field-name">-x:</th><td class="field-body">Apply selected action to all plants except those specified (invert selection)</td>
</tr>
</tbody>
</table>
<p>Specifying both -t and -s will have no effect. If no plant IDs are specified, all valid plant IDs will be listed.</p>
</div>
</div>
<div class="section" id="tidlers">
<h2><a class="toc-backref" href="#id67">tidlers</a></h2>
<p>Toggle between all possible positions where the idlers count can be placed.</p>
</div>
<div class="section" id="twaterlvl">
<h2><a class="toc-backref" href="#id68">twaterlvl</a></h2>
<p>Toggle between displaying/not displaying liquid depth as numbers.</p>
</div>
<div class="section" id="job">
<h2><a class="toc-backref" href="#id69">job</a></h2>
<p>Command for general job query and manipulation.</p>
<dl class="docutils">
<dt>Options:</dt>
<dd><ul class="first last simple">
<li>no extra options - Print details of the current job. The job can be selected in a workshop, or the unit/jobs screen.</li>
<li>list - Print details of all jobs in the selected workshop.</li>
<li>item-material &lt;item-idx&gt; &lt;material[:subtoken]&gt; - Replace the exact material id in the job item.</li>
<li>item-type &lt;item-idx&gt; &lt;type[:subtype]&gt; - Replace the exact item type id in the job item.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="job-material">
<h2><a class="toc-backref" href="#id70">job-material</a></h2>
<p>Alter the material of the selected job. Invoked as: job-material &lt;inorganic-token&gt;</p>
<dl class="docutils">
<dt>Intended to be used as a keybinding:</dt>
<dd><ul class="first last simple">
<li>In 'q' mode, when a job is highlighted within a workshop or furnace, changes the material of the job. Only inorganic materials can be used in this mode.</li>
<li>In 'b' mode, during selection of building components positions the cursor over the first available choice with the matching material.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="job-duplicate">
<h2><a class="toc-backref" href="#id71">job-duplicate</a></h2>
<dl class="docutils">
<dt>Duplicate the selected job in a workshop:</dt>
<dd><ul class="first last simple">
<li>In 'q' mode, when a job is highlighted within a workshop or furnace building, instantly duplicates the job.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="keybinding">
<h2><a class="toc-backref" href="#id72">keybinding</a></h2>
<p>Manages DFHack keybindings. Currently it supports any combination of Ctrl/Alt/Shift with F1-F9, or A-Z.</p>
<div class="section" id="id9">
<h3><a class="toc-backref" href="#id73">Options</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name" colspan="2">keybinding list &lt;key&gt;:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">List bindings active for the key combination.</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">keybinding clear &lt;key&gt; &lt;key&gt;...:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">Remove bindings for the specified keys.</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">keybinding add &lt;key&gt; &quot;cmdline&quot; &quot;cmdline&quot;...:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">Add bindings for the specified key.</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">keybinding set &lt;key&gt; &quot;cmdline&quot; &quot;cmdline&quot;...:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">Clear, and then add bindings for the specified key.</td>
</tr>
</tbody>
</table>
<p>When multiple commands are bound to the same key combination, DFHack selects the first applicable one. Later 'add' commands, and earlier entries within one 'add' command have priority. Commands that are not specifically intended for use as a hotkey are always considered applicable.</p>
</div>
</div>
<div class="section" id="liquids">
<h2><a class="toc-backref" href="#id74">liquids</a></h2>
<p>Allows adding magma, water and obsidian to the game. It replaces the normal dfhack command line and can't be used from a hotkey.
For more information, refer to the command's internal help.</p>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">Spawning and deleting liquids can F up pathing data and
temperatures (creating heat traps). You've been warned.</p>
</div>
</div>
<div class="section" id="mode">
<h2><a class="toc-backref" href="#id75">mode</a></h2>
<p>This command lets you see and change the game mode directly. Not all combinations are good for every situation and most of them will produce undesirable results.
There are a few good ones though.</p>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<p class="last">You are in fort game mode, managing your fortress and paused.
You switch to the arena game mode, <em>assume control of a creature</em> and then switch to adventure game mode(1).
You just lost a fortress and gained an adventurer.</p>
</div>
<p>I take no responsibility of anything that happens as a result of using this tool :P</p>
</div>
<div class="section" id="extirpate">
<h2><a class="toc-backref" href="#id76">extirpate</a></h2>
<p>A tool for getting rid of trees and shrubs. By default, it only kills a tree/shrub under the cursor.
The plants are turned into ashes instantly.</p>
<div class="section" id="id10">
<h3><a class="toc-backref" href="#id77">Options</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">shrubs:</th><td class="field-body">affect all shrubs on the map</td>
</tr>
<tr class="field"><th class="field-name">trees:</th><td class="field-body">affect all trees on the map</td>
</tr>
<tr class="field"><th class="field-name">all:</th><td class="field-body">affect every plant!</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="grow">
<h2><a class="toc-backref" href="#id78">grow</a></h2>
<p>Makes all saplings present on the map grow into trees (almost) instantly.</p>
</div>
<div class="section" id="immolate">
<h2><a class="toc-backref" href="#id79">immolate</a></h2>
<p>Very similar to extirpate, but additionally sets the plants on fire. The fires can and <em>will</em> spread ;)</p>
</div>
<div class="section" id="probe">
<h2><a class="toc-backref" href="#id80">probe</a></h2>
<p>Can be used to determine tile properties like temperature.</p>
</div>
<div class="section" id="prospect">
<h2><a class="toc-backref" href="#id81">prospect</a></h2>
<p>Prints a big list of all the present minerals and plants. By default, only the visible part of the map is scanned.</p>
<div class="section" id="id11">
<h3><a class="toc-backref" href="#id82">Options</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">all:</th><td class="field-body">Scan the whole map, as if it was revealed.</td>
</tr>
<tr class="field"><th class="field-name">value:</th><td class="field-body">Show material value in the output. Most useful for gems.</td>
</tr>
<tr class="field"><th class="field-name">hell:</th><td class="field-body">Show the Z range of HFS tubes. Implies 'all'.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="pre-embark-estimate">
<h3><a class="toc-backref" href="#id83">Pre-embark estimate</a></h3>
<p>If called during the embark selection screen, displays an estimate of layer stone availability.
If the 'all' option is specified, also estimates veins. The estimate is computed either
for 1 embark tile of the blinking biome, or for all tiles of the embark rectangle.</p>
</div>
<div class="section" id="id12">
<h3><a class="toc-backref" href="#id84">Options</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">all:</th><td class="field-body">processes all tiles, even hidden ones.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="regrass">
<h2><a class="toc-backref" href="#id85">regrass</a></h2>
<p>Regrows all surface grass, restoring outdoor plant growth for pre-0.31.19 worlds.</p>
</div>
<div class="section" id="rename">
<h2><a class="toc-backref" href="#id86">rename</a></h2>
<p>Allows renaming various things.</p>
<div class="section" id="id13">
<h3><a class="toc-backref" href="#id87">Options</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name" colspan="2">rename squad &lt;index&gt; &quot;name&quot;:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">Rename squad by index to 'name'.</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">rename hotkey &lt;index&gt; &quot;name&quot;:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">Rename hotkey by index. This allows assigning longer commands to the DF hotkeys.</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">rename unit &quot;nickname&quot;:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">Rename a unit/creature highlighted in the DF user interface.</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">rename unit-profession &quot;custom profession&quot;:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">Change proffession name of the highlighted unit/creature.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="reveal">
<h2><a class="toc-backref" href="#id88">reveal</a></h2>
<p>This reveals the map. By default, HFS will remain hidden so that the demons don't spawn. You can use 'reveal hell' to reveal everything. With hell revealed, you won't be able to unpause until you hide the map again. If you really want to unpause with hell revealed, use 'reveal demons'.</p>
</div>
<div class="section" id="unreveal">
<h2><a class="toc-backref" href="#id89">unreveal</a></h2>
<p>Reverts the effects of 'reveal'.</p>
</div>
<div class="section" id="revtoggle">
<h2><a class="toc-backref" href="#id90">revtoggle</a></h2>
<p>Switches between 'reveal' and 'unreveal'.</p>
</div>
<div class="section" id="revflood">
<h2><a class="toc-backref" href="#id91">revflood</a></h2>
<p>This command will hide the whole map and then reveal all the tiles that have a path to the in-game cursor.</p>
</div>
<div class="section" id="seedwatch">
<h2><a class="toc-backref" href="#id92">seedwatch</a></h2>
<p>Tool for turning cooking of seeds and plants on/off depending on how much you have of them.</p>
<p>See 'seedwatch help' for detailed description.</p>
</div>
<div class="section" id="showmood">
<h2><a class="toc-backref" href="#id93">showmood</a></h2>
<p>Shows all items needed for the currently active strange mood.</p>
</div>
<div class="section" id="copystock">
<h2><a class="toc-backref" href="#id94">copystock</a></h2>
<p>Copies the parameters of the currently highlighted stockpile to the custom stockpile settings and switches to custom stockpile placement mode, effectively allowing you to copy/paste stockpiles easily.</p>
</div>
<div class="section" id="ssense-stonesense">
<h2><a class="toc-backref" href="#id95">ssense / stonesense</a></h2>
<p>An isometric visualizer that runs in a second window. This requires working graphics acceleration and at least a dual core CPU (otherwise it will slow down DF).</p>
<p>All the data resides in the 'stonesense' directory. For detailed instructions, see stonesense/README.txt</p>
<p>Compatible with Windows &gt; XP SP3 and most modern Linux distributions.</p>
<p>Older versions, support and extra graphics can be found in the bay12 forum thread:
<a class="reference external" href="http://www.bay12forums.com/smf/index.php?topic=43260.0">http://www.bay12forums.com/smf/index.php?topic=43260.0</a></p>
<p>Some additional resources:
<a class="reference external" href="http://df.magmawiki.com/index.php/Utility:Stonesense/Content_repository">http://df.magmawiki.com/index.php/Utility:Stonesense/Content_repository</a></p>
</div>
<div class="section" id="tiletypes">
<h2><a class="toc-backref" href="#id96">tiletypes</a></h2>
<p>Can be used for painting map tiles and is a interactive command, much like liquids.
You can paint tiles by their properties - shape, general material and a few others (paint).
You can also paint only over tiles that match a set of properties (filter)</p>
<p>For more details, see the 'help' command while using this.</p>
</div>
<div class="section" id="tubefill">
<h2><a class="toc-backref" href="#id97">tubefill</a></h2>
<p>Fills all the adamantine veins again. Veins that were empty will be filled in too, but might still trigger a demon invasion (this is a known bug).</p>
</div>
<div class="section" id="vdig">
<h2><a class="toc-backref" href="#id98">vdig</a></h2>
<p>Designates a whole vein for digging. Requires an active in-game cursor placed over a vein tile. With the 'x' option, it will traverse z-levels (putting stairs between the same-material tiles).</p>
</div>
<div class="section" id="vdigx">
<h2><a class="toc-backref" href="#id99">vdigx</a></h2>
<p>A permanent alias for 'vdig x'.</p>
</div>
<div class="section" id="expdig">
<h2><a class="toc-backref" href="#id100">expdig</a></h2>
<p>This command can be used for exploratory mining.</p>
<p>See: <a class="reference external" href="http://df.magmawiki.com/index.php/DF2010:Exploratory_mining">http://df.magmawiki.com/index.php/DF2010:Exploratory_mining</a></p>
<p>There are two variables that can be set: pattern and filter.</p>
<div class="section" id="patterns">
<h3><a class="toc-backref" href="#id101">Patterns:</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">diag5:</th><td class="field-body">diagonals separated by 5 tiles</td>
</tr>
<tr class="field"><th class="field-name">diag5r:</th><td class="field-body">diag5 rotated 90 degrees</td>
</tr>
<tr class="field"><th class="field-name">ladder:</th><td class="field-body">A 'ladder' pattern</td>
</tr>
<tr class="field"><th class="field-name">ladderr:</th><td class="field-body">ladder rotated 90 degrees</td>
</tr>
<tr class="field"><th class="field-name">clear:</th><td class="field-body">Just remove all dig designations</td>
</tr>
<tr class="field"><th class="field-name">cross:</th><td class="field-body">A cross, exactly in the middle of the map.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="filters">
<h3><a class="toc-backref" href="#id102">Filters:</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">all:</th><td class="field-body">designate whole z-level</td>
</tr>
<tr class="field"><th class="field-name">hidden:</th><td class="field-body">designate only hidden tiles of z-level (default)</td>
</tr>
<tr class="field"><th class="field-name">designated:</th><td class="field-body">Take current designation and apply pattern to it.</td>
</tr>
</tbody>
</table>
<p>After you have a pattern set, you can use 'expdig' to apply it again.</p>
</div>
<div class="section" id="examples">
<h3><a class="toc-backref" href="#id103">Examples:</a></h3>
<dl class="docutils">
<dt>designate the diagonal 5 patter over all hidden tiles:</dt>
<dd><ul class="first last simple">
<li>expdig diag5 hidden</li>
</ul>
</dd>
<dt>apply last used pattern and filter:</dt>
<dd><ul class="first last simple">
<li>expdig</li>
</ul>
</dd>
<dt>Take current designations and replace them with the ladder pattern:</dt>
<dd><ul class="first last simple">
<li>expdig ladder designated</li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section" id="digcircle">
<h2><a class="toc-backref" href="#id104">digcircle</a></h2>
<p>A command for easy designation of filled and hollow circles.
It has several types of options.</p>
<div class="section" id="shape">
<h3><a class="toc-backref" href="#id105">Shape:</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">hollow:</th><td class="field-body">Set the circle to hollow (default)</td>
</tr>
<tr class="field"><th class="field-name">filled:</th><td class="field-body">Set the circle to filled</td>
</tr>
<tr class="field"><th class="field-name">#:</th><td class="field-body">Diameter in tiles (default = 0, does nothing)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="action">
<h3><a class="toc-backref" href="#id106">Action:</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">set:</th><td class="field-body">Set designation (default)</td>
</tr>
<tr class="field"><th class="field-name">unset:</th><td class="field-body">Unset current designation</td>
</tr>
<tr class="field"><th class="field-name">invert:</th><td class="field-body">Invert designations already present</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="designation-types">
<h3><a class="toc-backref" href="#id107">Designation types:</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">dig:</th><td class="field-body">Normal digging designation (default)</td>
</tr>
<tr class="field"><th class="field-name">ramp:</th><td class="field-body">Ramp digging</td>
</tr>
<tr class="field"><th class="field-name">ustair:</th><td class="field-body">Staircase up</td>
</tr>
<tr class="field"><th class="field-name">dstair:</th><td class="field-body">Staircase down</td>
</tr>
<tr class="field"><th class="field-name">xstair:</th><td class="field-body">Staircase up/down</td>
</tr>
<tr class="field"><th class="field-name">chan:</th><td class="field-body">Dig channel</td>
</tr>
</tbody>
</table>
<p>After you have set the options, the command called with no options
repeats with the last selected parameters.</p>
</div>
<div class="section" id="id14">
<h3><a class="toc-backref" href="#id108">Examples:</a></h3>
<ul class="simple">
<li>'digcircle filled 3' = Dig a filled circle with radius = 3.</li>
<li>'digcircle' = Do it again.</li>
</ul>
</div>
</div>
<div class="section" id="weather">
<h2><a class="toc-backref" href="#id109">weather</a></h2>
<p>Prints the current weather map by default.</p>
<p>Also lets you change the current weather to 'clear sky', 'rainy' or 'snowing'.</p>
<div class="section" id="id15">
<h3><a class="toc-backref" href="#id110">Options:</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">snow:</th><td class="field-body">make it snow everywhere.</td>
</tr>
<tr class="field"><th class="field-name">rain:</th><td class="field-body">make it rain.</td>
</tr>
<tr class="field"><th class="field-name">clear:</th><td class="field-body">clear the sky.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="workflow">
<h2><a class="toc-backref" href="#id111">workflow</a></h2>
<p>Manage control of repeat jobs.</p>
<div class="section" id="id16">
<h3><a class="toc-backref" href="#id112">Usage</a></h3>
<dl class="docutils">
<dt><tt class="docutils literal">workflow enable <span class="pre">[option...],</span> workflow disable <span class="pre">[option...]</span></tt></dt>
<dd><p class="first">If no options are specified, enables or disables the plugin.
Otherwise, enables or disables any of the following options:</p>
<ul class="last simple">
<li>drybuckets: Automatically empty abandoned water buckets.</li>
<li>auto-melt: Resume melt jobs when there are objects to melt.</li>
</ul>
</dd>
<dt><tt class="docutils literal">workflow jobs</tt></dt>
<dd>List workflow-controlled jobs (if in a workshop, filtered by it).</dd>
<dt><tt class="docutils literal">workflow list</tt></dt>
<dd>List active constraints, and their job counts.</dd>
<dt><tt class="docutils literal">workflow count <span class="pre">&lt;constraint-spec&gt;</span> <span class="pre">&lt;cnt-limit&gt;</span> <span class="pre">[cnt-gap],</span> workflow amount <span class="pre">&lt;constraint-spec&gt;</span> <span class="pre">&lt;cnt-limit&gt;</span> <span class="pre">[cnt-gap]</span></tt></dt>
<dd>Set a constraint. The first form counts each stack as only 1 item.</dd>
<dt><tt class="docutils literal">workflow unlimit <span class="pre">&lt;constraint-spec&gt;</span></tt></dt>
<dd>Delete a constraint.</dd>
</dl>
</div>
<div class="section" id="function">
<h3><a class="toc-backref" href="#id113">Function</a></h3>
<p>When the plugin is enabled, it protects all repeat jobs from removal.
If they do disappear due to any cause, they are immediately re-added to their
workshop and suspended.</p>
<p>In addition, when any constraints on item amounts are set, repeat jobs that produce
that kind of item are automatically suspended and resumed as the item amount
goes above or below the limit. The gap specifies how much below the limit
the amount has to drop before jobs are resumed; this is intended to reduce
the frequency of jobs being toggled.</p>
</div>
<div class="section" id="constraint-examples">
<h3><a class="toc-backref" href="#id114">Constraint examples</a></h3>
<p>Keep metal bolts within 900-1000, and wood/bone within 150-200.</p>
<pre class="literal-block">
workflow amount AMMO:ITEM_AMMO_BOLTS/METAL 1000 100
workflow amount AMMO:ITEM_AMMO_BOLTS/WOOD,BONE 200 50
</pre>
<p>Keep the number of prepared food &amp; drink stacks between 90 and 120</p>
<pre class="literal-block">
workflow count FOOD 120 30
workflow count DRINK 120 30
</pre>
<p>Make sure there are always 25-30 empty bins/barrels/bags.</p>
<pre class="literal-block">
workflow count BIN 30
workflow count BARREL 30
workflow count BOX/CLOTH,SILK,YARN 30
</pre>
<p>Make sure there are always 15-20 coal and 25-30 copper bars.</p>
<pre class="literal-block">
workflow count BAR//COAL 20
workflow count BAR//COPPER 30
</pre>
<p>Collect 15-20 sand bags and clay boulders.</p>
<pre class="literal-block">
workflow count POWDER_MISC/SAND 20
workflow count BOULDER/CLAY 20
</pre>
<p>Make sure there are always 80-100 units of dimple dye.</p>
<pre class="literal-block">
  workflow amount POWDER_MISC//MUSHROOM_CUP_DIMPLE:MILL 100 20

In order for this to work, you have to set the material of the PLANT input on
the Mill Plants job to MUSHROOM_CUP_DIMPLE using the 'job item-material' command.
</pre>
</div>
</div>
<div class="section" id="mapexport">
<h2><a class="toc-backref" href="#id115">mapexport</a></h2>
<p>Export the current loaded map as a file. This will be eventually usable with visualizers.</p>
</div>
<div class="section" id="dwarfexport">
<h2><a class="toc-backref" href="#id116">dwarfexport</a></h2>
<p>Export dwarves to RuneSmith-compatible XML.</p>
</div>
</div>
</div>
</body>
</html>
